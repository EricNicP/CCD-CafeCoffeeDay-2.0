<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CCD 2.0 - Next Gen Coffee Experience</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #8B4513;
            --secondary-color: #D2691E;
            --accent-color: #00ff41;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --dark-color: #2c3e50;
            --darker-color: #0a0a0a;
            --light-color: #f8f9fa;
            --gradient-primary: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
            --gradient-secondary: linear-gradient(135deg, #8B4513 0%, #D2691E 100%);
            --gradient-accent: linear-gradient(135deg, #00ff41 0%, #00cc33 100%);
            --gradient-dark: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
            --shadow-light: 0 4px 15px rgba(0, 0, 0, 0.3);
            --shadow-medium: 0 8px 25px rgba(0, 0, 0, 0.4);
            --shadow-heavy: 0 15px 35px rgba(0, 0, 0, 0.5);
            --neon-border: 0 0 15px rgba(0, 255, 65, 0.6);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--gradient-dark);
            min-height: 100vh;
            color: #2c3e50;
            overflow-x: hidden;
            display: flex;
        }

        /* Section Icons */
        .section-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            color: var(--accent-color);
            text-shadow: var(--neon-border);
            animation: pulse 2s infinite;
        }

        .section-icon.home { color: #00ff41; }
        .section-icon.menu { color: #8B4513; }
        .section-icon.cafes { color: #00ff41; }
        .section-icon.events { color: #ff6b35; }
        .section-icon.promotions { color: #ffd700; }
        .section-icon.cart { color: #ff4757; }
        .section-icon.orders { color: #3742fa; }
        .section-icon.profile { color: #2ed573; }
        .section-icon.settings { color: #a4b0be; }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: var(--gradient-dark);
            padding: 20px;
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            overflow-y: auto;
            border-right: 3px solid var(--accent-color);
            box-shadow: var(--shadow-heavy);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .sidebar-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--accent-color);
        }

        .sidebar-header h1 {
            color: var(--accent-color);
            font-size: 1.8rem;
            margin-bottom: 10px;
            text-shadow: var(--neon-border);
        }

        .sidebar-header p {
            color: #2c3e50;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .sidebar-nav {
            list-style: none;
            padding: 0;
        }

        .sidebar-nav li {
            margin-bottom: 10px;
        }

        .sidebar-nav button {
            width: 100%;
            background: transparent;
            border: 2px solid transparent;
            color: #2c3e50;
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            text-align: left;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sidebar-nav button:hover {
            background: var(--gradient-secondary);
            border-color: var(--accent-color);
            box-shadow: var(--neon-border);
            transform: translateX(5px);
        }

        .sidebar-nav button.active {
            background: var(--gradient-secondary);
            border-color: var(--accent-color);
            box-shadow: var(--neon-border);
        }

        .sidebar-footer {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
            text-align: center;
            color: #2c3e50;
            font-size: 0.8rem;
            font-weight: 500;
        }

        /* Main Content Area */
        .main-wrapper {
            flex: 1;
            margin-left: 280px;
            padding: 20px;
        }

        /* Mobile Sidebar Toggle */
        .sidebar-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1001;
            background: var(--gradient-secondary);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            box-shadow: var(--shadow-medium);
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.open {
                transform: translateX(0);
            }
            
            .main-wrapper {
                margin-left: 0;
            }
            
            .sidebar-toggle {
                display: block;
            }
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: var(--gradient-primary);
            animation: gradientShift 10s ease infinite;
        }

        @keyframes gradientShift {
            0% { background: var(--gradient-primary); }
            50% { background: var(--gradient-secondary); }
            100% { background: var(--gradient-primary); }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* Enhanced Header */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            padding: 25px;
            border-radius: 20px;
            box-shadow: var(--shadow-heavy);
            text-align: center;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: slideDown 0.8s ease-out;
        }

        @keyframes slideDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .header h1 {
            color: var(--primary-color);
            font-size: 3rem;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .header .subtitle {
            color: var(--secondary-color);
            font-size: 1.2rem;
            font-weight: 500;
            margin-bottom: 20px;
        }

        .status {
            padding: 15px 25px;
            border-radius: 50px;
            margin: 15px 0;
            font-weight: bold;
            font-size: 1.1rem;
            display: inline-block;
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .status.connected {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            color: #155724;
            border: 2px solid #c3e6cb;
            box-shadow: 0 4px 15px rgba(21, 87, 36, 0.2);
        }

        .status.disconnected {
            background: linear-gradient(135deg, #f8d7da, #f5c6cb);
            color: #721c24;
            border: 2px solid #f5c6cb;
            box-shadow: 0 4px 15px rgba(114, 28, 36, 0.2);
        }

        /* Enhanced Navigation */
        .nav {
            display: flex;
            gap: 15px;
            margin: 25px 0;
            flex-wrap: wrap;
            justify-content: center;
            animation: slideUp 0.8s ease-out 0.2s both;
        }

        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .nav button {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow-light);
            position: relative;
            overflow: hidden;
        }

        .nav button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .nav button:hover::before {
            left: 100%;
        }

        .nav button:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: var(--shadow-medium);
        }

        .nav button.active {
            background: linear-gradient(135deg, var(--secondary-color), var(--accent-color));
            box-shadow: var(--shadow-medium);
            transform: translateY(-2px);
        }

        /* Enhanced Content */
        .content {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 25px;
            box-shadow: var(--shadow-heavy);
            min-height: 600px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: fadeIn 1s ease-out 0.4s both;
        }

        /* Enhanced Grid */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        /* Enhanced Cards with Fluorescent Borders */
        .card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 249, 250, 0.95));
            padding: 25px;
            border-radius: 20px;
            box-shadow: var(--shadow-light);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--gradient-accent);
            box-shadow: var(--neon-border);
        }

        .card::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: var(--gradient-accent);
            border-radius: 22px;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .card:hover::after {
            opacity: 1;
        }

        .card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: var(--shadow-heavy);
            border-color: var(--accent-color);
        }

        .card h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card p {
            color: #2c3e50;
            margin-bottom: 15px;
            line-height: 1.6;
            font-weight: 500;
        }

        .price {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
            margin: 15px 0;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        /* Enhanced Buttons */
        .add-btn, .order-btn, .book-btn, .apply-btn {
            background: linear-gradient(135deg, var(--success-color), #20c997);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
            width: 100%;
            margin-top: 15px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow-light);
            position: relative;
            overflow: hidden;
        }

        .add-btn:hover, .order-btn:hover, .book-btn:hover, .apply-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
            background: linear-gradient(135deg, #20c997, var(--success-color));
        }

        .add-btn:disabled, .book-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
        }

        /* Enhanced Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .stat {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(248, 249, 250, 0.9));
            border-radius: 20px;
            box-shadow: var(--shadow-light);
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .stat:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-medium);
        }

        .stat h3 {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .stat p {
            color: #2c3e50;
            font-weight: bold;
            font-size: 1.1rem;
        }

        /* Enhanced Cart */
        .cart {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 25px;
            border-radius: 20px;
            margin: 25px 0;
            box-shadow: var(--shadow-light);
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 2px solid rgba(0, 0, 0, 0.05);
            background: white;
            border-radius: 10px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
            color: #2c3e50;
            font-weight: bold;
        }

        .cart-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-light);
        }

        .cart-total {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2c3e50;
            text-align: center;
            margin: 25px 0;
            padding: 20px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(248, 249, 250, 0.9));
            border-radius: 15px;
            box-shadow: var(--shadow-light);
        }

        /* Enhanced Badges */
        .badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
            margin: 3px;
            transition: all 0.3s ease;
        }

        .badge.fair-trade {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            color: #155724;
            box-shadow: 0 2px 8px rgba(21, 87, 36, 0.2);
        }

        .badge.organic {
            background: linear-gradient(135deg, #d1ecf1, #bee5eb);
            color: #0c5460;
            box-shadow: 0 2px 8px rgba(12, 84, 96, 0.2);
        }

        .badge:hover {
            transform: scale(1.05);
        }

        /* Loading Animation */
        .loading {
            text-align: center;
            font-size: 1.3rem;
            color: var(--primary-color);
            margin: 50px 0;
            animation: pulse 1.5s infinite;
        }

        .loading::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--primary-color);
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .hidden {
            display: none;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .nav {
                flex-direction: column;
                align-items: center;
            }
            
            .nav button {
                width: 200px;
            }
            
            .content {
                padding: 20px;
            }
            
            .grid {
                grid-template-columns: 1fr;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Floating Action Button */
        .fab {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: var(--shadow-heavy);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .fab:hover {
            transform: scale(1.1);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        /* Notification Toast */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success-color);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: var(--shadow-medium);
            z-index: 1001;
            animation: slideInRight 0.5s ease-out;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* Enhanced Features Section */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .feature-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(248, 249, 250, 0.9));
            padding: 30px;
            border-radius: 20px;
            box-shadow: var(--shadow-light);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--gradient-accent);
            box-shadow: var(--neon-border);
        }

        .feature-card::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: var(--gradient-accent);
            border-radius: 22px;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .feature-card:hover::after {
            opacity: 1;
        }

        .feature-card:hover {
            transform: translateY(-10px) scale(1.03);
            box-shadow: var(--shadow-heavy);
            border-color: var(--accent-color);
        }

        .feature-card h4 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .feature-card p {
            color: #2c3e50;
            line-height: 1.6;
            font-size: 1rem;
            font-weight: 500;
        }

        /* Image placeholders for when images are added */
        .image-placeholder {
            width: 100%;
            height: 200px;
            background: var(--gradient-accent);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            margin-bottom: 15px;
            box-shadow: var(--shadow-light);
        }

        .menu-item-image {
            width: 100%;
            height: 150px;
            background: var(--gradient-secondary);
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
        }

        .menu-item-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(139, 69, 19, 0.8), rgba(210, 105, 30, 0.8));
            z-index: 1;
        }

        .menu-item-image span {
            position: relative;
            z-index: 2;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        /* Image Carousel */
        .image-carousel {
            width: 100%;
            height: 300px;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            margin: 20px 0;
            box-shadow: var(--shadow-heavy);
        }

        .carousel-container {
            display: flex;
            transition: transform 0.5s ease;
            height: 100%;
        }

        .carousel-slide {
            min-width: 100%;
            height: 300px;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            position: relative;
        }

        .carousel-slide::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.1));
        }

        .carousel-slide span {
            position: relative;
            z-index: 2;
        }

        .carousel-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            padding: 15px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .carousel-nav:hover {
            background: rgba(0, 0, 0, 0.8);
        }

        .carousel-prev {
            left: 10px;
        }

        .carousel-next {
            right: 10px;
        }

        .carousel-dots {
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
        }

        .carousel-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .carousel-dot.active {
            background: var(--accent-color);
            box-shadow: var(--neon-border);
        }

        /* CCD Logo */
        .ccd-logo {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 80px;
            height: 80px;
            background: var(--gradient-secondary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            box-shadow: var(--shadow-heavy);
            z-index: 1000;
            border: 3px solid var(--accent-color);
        }

        .ccd-logo::before {
            content: 'CCD';
            font-family: 'Arial', sans-serif;
            font-weight: bold;
        }

        /* Hero Section */
        .hero-section {
            background: var(--gradient-dark);
            padding: 60px 40px;
            border-radius: 25px;
            margin-bottom: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="coffee" patternUnits="userSpaceOnUse" width="20" height="20"><circle cx="10" cy="10" r="2" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23coffee)"/></svg>');
            opacity: 0.3;
        }

        .hero-content {
            position: relative;
            z-index: 2;
        }

        .hero-section h1 {
            font-size: 3.5rem;
            color: var(--accent-color);
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .hero-section p {
            font-size: 1.3rem;
            color: #2c3e50;
            margin-bottom: 30px;
            font-weight: 500;
        }

        .hero-cta {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .hero-btn {
            background: var(--gradient-secondary);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-medium);
        }

        .hero-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-heavy);
        }

        /* Auth Forms */
        .auth-toggle {
            margin-bottom: 30px;
        }

        .auth-tab {
            background: transparent;
            border: 2px solid var(--accent-color);
            color: var(--accent-color);
            padding: 10px 20px;
            margin: 0 10px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .auth-tab.active {
            background: var(--accent-color);
            color: var(--darker-color);
        }

        .auth-tab:hover {
            background: var(--accent-color);
            color: var(--darker-color);
            transform: translateY(-2px);
        }

        .auth-form {
            margin: 20px 0;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.3);
        }

        .form-group input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
        }

        .form-group label input[type="checkbox"] {
            margin-right: 8px;
        }

        /* Orders and Cart Text Styling */
        .cart p, .cart-item span {
            color: #2c3e50 !important;
            font-weight: bold;
        }

        #orders-list .card {
            color: #2c3e50;
        }

        #orders-list .card h3,
        #orders-list .card p {
            color: #2c3e50 !important;
            font-weight: bold;
        }

        #orders-list .badge {
            color: #2c3e50 !important;
            font-weight: bold;
        }

        /* Sidebar Cart and Orders Text Styling */
        .sidebar-nav button[onclick*="cart"] span,
        .sidebar-nav button[onclick*="orders"] span {
            color: #2c3e50 !important;
            font-weight: bold;
        }

        .sidebar-nav button[onclick*="cart"],
        .sidebar-nav button[onclick*="orders"] {
            color: #2c3e50 !important;
        }

        .sidebar-nav button[onclick*="cart"]:hover,
        .sidebar-nav button[onclick*="orders"]:hover {
            color: #2c3e50 !important;
        }

        .sidebar-nav button[onclick*="cart"].active,
        .sidebar-nav button[onclick*="orders"].active {
            color: #2c3e50 !important;
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>
    
    <!-- CCD Logo -->
    <div class="ccd-logo"></div>
    
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h1><i class="fas fa-coffee"></i> CCD 2.0</h1>
            <p>Next Generation Coffee Experience</p>
        </div>
        
        <ul class="sidebar-nav">
            <li><button onclick="showSection('home')" class="active" id="nav-home">
                <i class="fas fa-home"></i> Dashboard
            </button></li>
            <li><button onclick="showSection('menu')" id="nav-menu">
                <i class="fas fa-coffee"></i> Menu
            </button></li>
            <li><button onclick="showSection('cafes')" id="nav-cafes">
                <i class="fas fa-store"></i> Find Caf√©s
            </button></li>
            <li><button onclick="showSection('events')" id="nav-events">
                <i class="fas fa-calendar-alt"></i> Events
            </button></li>
            <li><button onclick="showSection('promotions')" id="nav-promotions">
                <i class="fas fa-gift"></i> Promotions
            </button></li>
            <li><button onclick="showSection('cart')" id="nav-cart">
                <i class="fas fa-shopping-cart"></i> Cart (<span id="cart-count">0</span>)
            </button></li>
            <li><button onclick="showSection('orders')" id="nav-orders">
                <i class="fas fa-receipt"></i> My Orders
            </button></li>
            <li><button onclick="showSection('profile')" id="nav-profile">
                <i class="fas fa-user"></i> Profile
            </button></li>
            <li><button onclick="showSection('settings')" id="nav-settings">
                <i class="fas fa-cog"></i> Settings
            </button></li>
        </ul>
        
        <div class="sidebar-footer">
            <p>¬© 2024 CCD 2.0</p>
        </div>
    </div>

    <!-- Mobile Toggle -->
    <button class="sidebar-toggle" onclick="toggleSidebar()">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Main Content -->
    <div class="main-wrapper">
        <div class="container">

        <div class="content">
            <!-- Home Section -->
            <div id="home-section">
                <div class="section-icon home">üè†</div>
                <!-- Hero Section with Carousel -->
                <div class="hero-section">
                    <div class="hero-content">
                        <h1><i class="fas fa-coffee"></i> Welcome to CCD 2.0</h1>
                        <p>Experience the next generation of coffee culture with premium blends, sustainable practices, and innovative technology</p>
                        <div class="hero-cta">
                            <button class="hero-btn" onclick="showSection('menu')">
                                <i class="fas fa-coffee"></i> Explore Menu
                            </button>
                            <button class="hero-btn" onclick="showSection('cafes')">
                                <i class="fas fa-map-marker-alt"></i> Find Caf√©s
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Image Carousel -->
                <div class="image-carousel">
                    <div class="carousel-container" id="carousel-container">
                        <div class="carousel-slide" style="background: linear-gradient(135deg, #000000, #1a1a1a);">
                            <span><i class="fas fa-coffee"></i> Premium Coffee Blends</span>
                        </div>
                        <div class="carousel-slide" style="background: linear-gradient(135deg, #0a0a0a, #2c2c2c);">
                            <span><i class="fas fa-store"></i> Modern Caf√© Experience</span>
                        </div>
                        <div class="carousel-slide" style="background: linear-gradient(135deg, #001a00, #003300);">
                            <span><i class="fas fa-leaf"></i> Sustainable & Organic</span>
                        </div>
                        <div class="carousel-slide" style="background: linear-gradient(135deg, #1a0000, #330000);">
                            <span><i class="fas fa-heart"></i> Community & Events</span>
                        </div>
                    </div>
                    <button class="carousel-nav carousel-prev" onclick="prevSlide()">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button class="carousel-nav carousel-next" onclick="nextSlide()">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                    <div class="carousel-dots">
                        <button class="carousel-dot active" onclick="goToSlide(0)"></button>
                        <button class="carousel-dot" onclick="goToSlide(1)"></button>
                        <button class="carousel-dot" onclick="goToSlide(2)"></button>
                        <button class="carousel-dot" onclick="goToSlide(3)"></button>
                    </div>
                </div>

                <div class="stats">
                    <div class="stat">
                        <h3 id="menu-count">0</h3>
                        <p><i class="fas fa-utensils"></i> Menu Items</p>
                    </div>
                    <div class="stat">
                        <h3 id="cafes-count">0</h3>
                        <p><i class="fas fa-map-marker-alt"></i> Caf√© Locations</p>
                    </div>
                    <div class="stat">
                        <h3 id="orders-count">0</h3>
                        <p><i class="fas fa-shopping-bag"></i> Total Orders</p>
                    </div>
                    <div class="stat">
                        <h3 id="points-count">0</h3>
                        <p><i class="fas fa-gem"></i> Loyalty Points</p>
                    </div>
                </div>
                <div class="features-grid">
                    <div class="feature-card">
                        <h4><i class="fas fa-leaf"></i> Sustainability</h4>
                        <p>Fair trade, organic, and eco-friendly options with full transparency</p>
                    </div>
                    <div class="feature-card">
                        <h4><i class="fas fa-trophy"></i> Loyalty Program</h4>
                        <p>Advanced rewards system with points, levels, and exclusive benefits</p>
                    </div>
                    <div class="feature-card">
                        <h4><i class="fas fa-mobile-alt"></i> Smart Ordering</h4>
                        <p>Real-time stock tracking, preparation status, and delivery updates</p>
                    </div>
                    <div class="feature-card">
                        <h4><i class="fas fa-map-marked-alt"></i> Multiple Locations</h4>
                        <p>Find caf√©s with unique features, amenities, and real-time availability</p>
                    </div>
                </div>
            </div>

            <!-- Menu Section -->
            <div id="menu-section" class="hidden">
                <div class="section-icon menu">‚òï</div>
                <h2><i class="fas fa-coffee"></i> Premium Menu</h2>
                <div id="menu-grid" class="grid">
                    <div class="loading">Loading premium menu...</div>
                </div>
            </div>

            <!-- Cafes Section -->
            <div id="cafes-section" class="hidden">
                <div class="section-icon cafes">üè™</div>
                <h2><i class="fas fa-store"></i> Find Our Caf√©s in Goa</h2>
                <div id="cafes-grid" class="grid">
                    <div class="loading">Loading caf√© locations...</div>
                </div>
            </div>

            <!-- Events Section -->
            <div id="events-section" class="hidden">
                <div class="section-icon events">üéâ</div>
                <h2><i class="fas fa-calendar-alt"></i> Upcoming Events</h2>
                <div id="events-grid" class="grid">
                    <div class="loading">Loading exciting events...</div>
                </div>
            </div>

            <!-- Promotions Section -->
            <div id="promotions-section" class="hidden">
                <div class="section-icon promotions">üéÅ</div>
                <h2><i class="fas fa-gift"></i> Exclusive Promotions</h2>
                <div id="promotions-grid" class="grid">
                    <div class="loading">Loading amazing offers...</div>
                </div>
            </div>

            <!-- Cart Section -->
            <div id="cart-section" class="hidden">
                <div class="section-icon cart">üõí</div>
                <h2><i class="fas fa-shopping-cart"></i> Your Cart</h2>
                <div id="cart-items" class="cart">
                    <p><i class="fas fa-shopping-cart"></i> Your cart is empty</p>
                </div>
                <div id="cart-total" class="cart-total hidden">Total: $0.00</div>
                <button id="place-order" class="order-btn hidden" onclick="placeOrder()">
                    <i class="fas fa-credit-card"></i> Place Order
                </button>
            </div>

            <!-- Orders Section -->
            <div id="orders-section" class="hidden">
                <div class="section-icon orders">üìã</div>
                <h2><i class="fas fa-receipt"></i> Order History</h2>
                <div id="orders-list">
                    <p><i class="fas fa-receipt"></i> No orders yet</p>
                </div>
            </div>

            <!-- Profile Section -->
            <div id="profile-section" class="hidden">
                <div class="section-icon profile">üë§</div>
                <h2><i class="fas fa-user"></i> My Profile</h2>
                
                <!-- Login/Register Toggle -->
                <div class="auth-toggle" style="text-align: center; margin-bottom: 30px;">
                    <button id="login-tab" class="auth-tab active" onclick="showAuthTab('login')">Login</button>
                    <button id="register-tab" class="auth-tab" onclick="showAuthTab('register')">Register</button>
                </div>

                <!-- Login Form -->
                <div id="login-form" class="auth-form">
                    <div class="card" style="max-width: 500px; margin: 0 auto;">
                        <h3><i class="fas fa-sign-in-alt"></i> Login to Your Account</h3>
                        <form onsubmit="handleLogin(event)">
                            <div class="form-group">
                                <label><i class="fas fa-envelope"></i> Email Address</label>
                                <input type="email" id="login-email" required placeholder="Enter your email">
                            </div>
                            <div class="form-group">
                                <label><i class="fas fa-lock"></i> Password</label>
                                <input type="password" id="login-password" required placeholder="Enter your password">
                            </div>
                            <button type="submit" class="add-btn">
                                <i class="fas fa-sign-in-alt"></i> Login
                            </button>
                        </form>
                        <p style="text-align: center; margin-top: 15px;">
                            Don't have an account? <a href="#" onclick="showAuthTab('register')" style="color: var(--accent-color);">Register here</a>
                        </p>
                    </div>
                </div>

                <!-- Register Form -->
                <div id="register-form" class="auth-form hidden">
                    <div class="card" style="max-width: 500px; margin: 0 auto;">
                        <h3><i class="fas fa-user-plus"></i> Create New Account</h3>
                        <form onsubmit="handleRegister(event)">
                            <div class="form-group">
                                <label><i class="fas fa-user"></i> Full Name</label>
                                <input type="text" id="register-name" required placeholder="Enter your full name">
                            </div>
                            <div class="form-group">
                                <label><i class="fas fa-envelope"></i> Email Address</label>
                                <input type="email" id="register-email" required placeholder="Enter your email">
                            </div>
                            <div class="form-group">
                                <label><i class="fas fa-phone"></i> Phone Number</label>
                                <input type="tel" id="register-phone" placeholder="Enter your phone number">
                            </div>
                            <div class="form-group">
                                <label><i class="fas fa-lock"></i> Password</label>
                                <input type="password" id="register-password" required placeholder="Create a password">
                            </div>
                            <div class="form-group">
                                <label><i class="fas fa-lock"></i> Confirm Password</label>
                                <input type="password" id="register-confirm-password" required placeholder="Confirm your password">
                            </div>
                            <button type="submit" class="add-btn">
                                <i class="fas fa-user-plus"></i> Create Account
                            </button>
                        </form>
                        <p style="text-align: center; margin-top: 15px;">
                            Already have an account? <a href="#" onclick="showAuthTab('login')" style="color: var(--accent-color);">Login here</a>
                        </p>
                    </div>
                </div>

                <!-- User Profile (shown when logged in) -->
                <div id="user-profile" class="hidden">
                    <div class="grid">
                        <div class="card">
                            <h3><i class="fas fa-user-circle"></i> Personal Information</h3>
                            <p><strong>Name:</strong> <span id="user-name">Coffee Lover</span></p>
                            <p><strong>Email:</strong> <span id="user-email">user@ccd2.com</span></p>
                            <p><strong>Phone:</strong> <span id="user-phone">+1 (555) 123-4567</span></p>
                            <p><strong>Member Since:</strong> <span id="user-join-date">January 2024</span></p>
                            <button class="add-btn" onclick="editProfile()">
                                <i class="fas fa-edit"></i> Edit Profile
                            </button>
                        </div>
                        <div class="card">
                            <h3><i class="fas fa-gem"></i> Loyalty Status</h3>
                            <p><strong>Level:</strong> <span id="user-level">Gold Member</span></p>
                            <p><strong>Points:</strong> <span id="profile-points">0</span></p>
                            <p><strong>Next Reward:</strong> <span id="next-reward">100 points away</span></p>
                            <p><strong>Total Orders:</strong> <span id="profile-orders">0</span></p>
                            <button class="add-btn" onclick="viewLoyaltyHistory()">
                                <i class="fas fa-history"></i> View History
                            </button>
                        </div>
                        <div class="card">
                            <h3><i class="fas fa-heart"></i> Favorites</h3>
                            <div id="favorites-list">
                                <p>Your favorite items will appear here</p>
                            </div>
                            <button class="add-btn" onclick="viewFavorites()">
                                <i class="fas fa-heart"></i> View All Favorites
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Section -->
            <div id="settings-section" class="hidden">
                <div class="section-icon settings">‚öôÔ∏è</div>
                <h2><i class="fas fa-cog"></i> Settings</h2>
                <div class="grid">
                    <div class="card">
                        <h3><i class="fas fa-bell"></i> Notifications</h3>
                        <p>Manage your notification preferences</p>
                        <form onsubmit="saveNotificationSettings(event)">
                            <label><input type="checkbox" id="notif-orders" checked> Order updates</label><br>
                            <label><input type="checkbox" id="notif-promotions" checked> Promotions</label><br>
                            <label><input type="checkbox" id="notif-events"> Events</label><br>
                            <label><input type="checkbox" id="notif-loyalty" checked> Loyalty rewards</label><br>
                            <label><input type="checkbox" id="notif-newsletter"> Newsletter</label><br>
                            <button type="submit" class="add-btn">
                                <i class="fas fa-save"></i> Save Settings
                            </button>
                        </form>
                    </div>
                    <div class="card">
                        <h3><i class="fas fa-palette"></i> Appearance</h3>
                        <p>Customize your experience</p>
                        <form onsubmit="saveAppearanceSettings(event)">
                            <div class="form-group">
                                <label>Font Size:</label>
                                <select id="font-size-select">
                                    <option value="small">Small</option>
                                    <option value="medium" selected>Medium</option>
                                    <option value="large">Large</option>
                                </select>
                            </div>
                            <button type="submit" class="add-btn">
                                <i class="fas fa-palette"></i> Apply Changes
                            </button>
                        </form>
                    </div>
                    <div class="card">
                        <h3><i class="fas fa-shield-alt"></i> Privacy & Security</h3>
                        <p>Manage your account security</p>
                        <button class="add-btn" onclick="changePassword()">
                            <i class="fas fa-key"></i> Change Password
                        </button>
                        <button class="add-btn" onclick="exportData()">
                            <i class="fas fa-download"></i> Export Data
                        </button>
                        <button class="add-btn" onclick="clearCache()">
                            <i class="fas fa-trash"></i> Clear Cache
                        </button>
                        <button class="add-btn" style="background: var(--danger-color);" onclick="deleteAccount()">
                            <i class="fas fa-user-times"></i> Delete Account
                        </button>
                    </div>
                    <div class="card">
                        <h3><i class="fas fa-coffee"></i> Coffee Preferences</h3>
                        <p>Customize your coffee experience</p>
                        <form onsubmit="saveCoffeePreferences(event)">
                            <div class="form-group">
                                <label>Preferred Coffee Type:</label>
                                <select id="coffee-type">
                                    <option value="espresso">Espresso</option>
                                    <option value="cappuccino">Cappuccino</option>
                                    <option value="latte">Latte</option>
                                    <option value="americano">Americano</option>
                                    <option value="cold-brew">Cold Brew</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Milk Preference:</label>
                                <select id="milk-type">
                                    <option value="regular">Regular Milk</option>
                                    <option value="oat">Oat Milk</option>
                                    <option value="almond">Almond Milk</option>
                                    <option value="soy">Soy Milk</option>
                                    <option value="coconut">Coconut Milk</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Sugar Level:</label>
                                <select id="sugar-level">
                                    <option value="none">No Sugar</option>
                                    <option value="light">Light</option>
                                    <option value="medium" selected>Medium</option>
                                    <option value="sweet">Sweet</option>
                                </select>
                            </div>
                            <button type="submit" class="add-btn">
                                <i class="fas fa-coffee"></i> Save Preferences
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </div>

    <!-- Floating Action Button -->
    <button class="fab" onclick="showSection('cart')" title="View Cart">
        <i class="fas fa-shopping-cart"></i>
    </button>

    <script>
        // Global variables
        let menu = [];
        let cafes = [];
        let events = [];
        let promotions = [];
        let cart = [];
        let orders = [];
        let backendConnected = false;
        let loyaltyPoints = 0;
        let currentSlide = 0;
        let carouselInterval;
        let currentUser = null;
        let userSettings = {
            notifications: {
                orders: true,
                promotions: true,
                events: false,
                loyalty: true,
                newsletter: false
            },
            appearance: {
                fontSize: 'medium'
            },
            coffee: {
                type: 'cappuccino',
                milk: 'regular',
                sugar: 'medium'
            }
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            checkBackendConnection();
            loadData();
            initializeAnimations();
            initializeCarousel();
            loadUserSettings();
        });

        // Initialize animations
        function initializeAnimations() {
            // Add staggered animation to cards
            const cards = document.querySelectorAll('.card');
            cards.forEach((card, index) => {
                card.style.animationDelay = `${index * 0.1}s`;
            });
        }

        // Check backend connection (silent)
        async function checkBackendConnection() {
            try {
                const response = await fetch('http://localhost:5000/api/health');
                if (response.ok) {
                    backendConnected = true;
                    console.log('‚úÖ Backend Connected Successfully!');
                }
            } catch (error) {
                backendConnected = false;
                console.log('‚ö†Ô∏è Using Offline Mode (Mock Data)');
            }
        }

        // Show toast notification
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // Load data from backend or use mock data
        async function loadData() {
            try {
                if (backendConnected) {
                    await loadFromBackend();
                } else {
                    loadMockData();
                }
                updateUI();
            } catch (error) {
                console.error('Error loading data:', error);
                loadMockData();
                updateUI();
            }
        }

        // Load data from backend
        async function loadFromBackend() {
            const [menuRes, cafesRes, eventsRes, promotionsRes] = await Promise.all([
                fetch('http://localhost:5000/api/menu'),
                fetch('http://localhost:5000/api/cafes'),
                fetch('http://localhost:5000/api/events'),
                fetch('http://localhost:5000/api/promotions')
            ]);

            if (menuRes.ok) {
                const menuData = await menuRes.json();
                menu = menuData.data || menuData;
            }

            if (cafesRes.ok) {
                const cafesData = await cafesRes.json();
                cafes = cafesData.data || cafesData;
            }

            if (eventsRes.ok) {
                const eventsData = await eventsRes.json();
                events = eventsData.data || eventsData;
            }

            if (promotionsRes.ok) {
                const promotionsData = await promotionsRes.json();
                promotions = promotionsData.data || promotionsData;
            }
        }

        // Enhanced mock data
        function loadMockData() {
            menu = [
                { id: 1, name: 'Signature Espresso', price: 2.50, stock_quantity: 50, category: 'Coffee', sustainability_rating: 4.5, fair_trade: true, organic: true, description: 'Rich, bold espresso shot with perfect crema' },
                { id: 2, name: 'Artisan Cappuccino', price: 3.50, stock_quantity: 30, category: 'Coffee', sustainability_rating: 4.2, fair_trade: true, organic: false, description: 'Perfect balance of espresso, steamed milk, and foam' },
                { id: 3, name: 'Velvet Latte', price: 4.00, stock_quantity: 25, category: 'Coffee', sustainability_rating: 4.0, fair_trade: true, organic: true, description: 'Smooth and creamy with a hint of sweetness' },
                { id: 4, name: 'French Croissant', price: 2.00, stock_quantity: 15, category: 'Food', sustainability_rating: 3.8, fair_trade: false, organic: true, description: 'Buttery, flaky pastry baked fresh daily' },
                { id: 5, name: 'Blueberry Muffin', price: 2.50, stock_quantity: 20, category: 'Food', sustainability_rating: 3.5, fair_trade: false, organic: false, description: 'Fresh baked with real blueberries' },
                { id: 6, name: 'Cold Brew Coffee', price: 3.00, stock_quantity: 40, category: 'Coffee', sustainability_rating: 4.3, fair_trade: true, organic: true, description: 'Smooth cold brew with notes of chocolate' }
            ];

            cafes = [
                { id: 1, name: 'CCD Calangute Beach', address: 'Tito\'s Lane, Calangute Beach Road', city: 'Calangute, Goa', features: ['Beach View', 'WiFi', 'Outdoor Seating', 'Parking', 'Pet Friendly'], wifi_available: true, parking_available: true, rating: 4.8, phone: '+91 832 227 1234' },
                { id: 2, name: 'CCD Panjim City Center', address: 'MG Road, Near Municipal Market', city: 'Panjim, Goa', features: ['City Center', 'WiFi', 'AC Seating', 'Quick Service', 'Student Discount'], wifi_available: true, parking_available: false, rating: 4.6, phone: '+91 832 222 5678' },
                { id: 3, name: 'CCD Baga Beach', address: 'Baga Beach Road, Near Tito\'s', city: 'Baga, Goa', features: ['Beach Access', 'Sunset Views', 'Outdoor Seating', 'WiFi', 'Live Music'], wifi_available: true, parking_available: true, rating: 4.9, phone: '+91 832 227 9012' },
                { id: 4, name: 'CCD Anjuna Beach', address: 'Anjuna Beach Road, Near Flea Market', city: 'Anjuna, Goa', features: ['Hippie Vibes', 'Flea Market Access', 'WiFi', 'Organic Options', 'Pet Friendly'], wifi_available: true, parking_available: true, rating: 4.7, phone: '+91 832 227 3456' },
                { id: 5, name: 'CCD Candolim Beach', address: 'Candolim Beach Road, Near Fort Aguada', city: 'Candolim, Goa', features: ['Fort View', 'Historical Area', 'WiFi', 'Parking', 'Family Friendly'], wifi_available: true, parking_available: true, rating: 4.5, phone: '+91 832 227 7890' },
                { id: 6, name: 'CCD Mapusa Market', address: 'Mapusa Market Road, Near Bus Stand', city: 'Mapusa, Goa', features: ['Local Market', 'WiFi', 'Quick Service', 'Student Discount', 'Budget Friendly'], wifi_available: true, parking_available: false, rating: 4.4, phone: '+91 832 226 1234' }
            ];

            events = [
                { id: 1, title: 'Coffee Masterclass', date: '2024-01-15', time: '14:00', description: 'Learn the art of coffee brewing from our master baristas', price: 25.00, max_participants: 20, current_participants: 12, instructor: 'Master Barista John' },
                { id: 2, title: 'Live Jazz Night', date: '2024-01-20', time: '19:00', description: 'Enjoy live jazz music with premium coffee and desserts', price: 15.00, max_participants: 50, current_participants: 35, instructor: 'Jazz Ensemble' },
                { id: 3, title: 'Latte Art Workshop', date: '2024-01-25', time: '10:00', description: 'Create beautiful latte art designs with professional guidance', price: 30.00, max_participants: 15, current_participants: 8, instructor: 'Artisan Sarah' }
            ];

            promotions = [
                { id: 1, title: 'Student Special', description: '20% off all items for students with valid ID', code: 'STUDENT20', discount_value: 20, valid_until: '2024-12-31' },
                { id: 2, title: 'Happy Hour', description: '50% off all drinks from 3-5 PM daily', code: 'HAPPY50', discount_value: 50, valid_until: '2024-12-31' },
                { id: 3, title: 'Welcome Bonus', description: 'Get 100 bonus points on your first order', code: 'WELCOME100', discount_value: 100, valid_until: '2024-12-31' }
            ];
        }

        // Update UI
        function updateUI() {
            // Update stats with animation
            animateCounter('menu-count', menu.length);
            animateCounter('cafes-count', cafes.length);
            animateCounter('orders-count', orders.length);
            animateCounter('points-count', loyaltyPoints);

            // Update cart count
            document.getElementById('cart-count').textContent = cart.length;

            // Update profile data
            document.getElementById('profile-points').textContent = loyaltyPoints;
            document.getElementById('profile-orders').textContent = orders.length;

            // Render sections
            renderMenu();
            renderCafes();
            renderEvents();
            renderPromotions();
            renderCart();
            renderOrders();
        }

        // Animate counter (fixed to only animate once)
        function animateCounter(elementId, targetValue) {
            const element = document.getElementById(elementId);
            const currentValue = parseInt(element.textContent) || 0;
            
            // Only animate if the value actually changed
            if (currentValue !== targetValue) {
                const increment = targetValue > currentValue ? 1 : -1;
                const duration = 1000;
                const stepTime = Math.abs(Math.floor(duration / (targetValue - currentValue)));
                
                let value = currentValue;
                const timer = setInterval(() => {
                    value += increment;
                    element.textContent = value;
                    if (value === targetValue) {
                        clearInterval(timer);
                    }
                }, stepTime);
            }
        }

        // Toggle sidebar on mobile
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
        }

        // Show section with realistic navigation
        function showSection(section) {
            // Hide all sections
            document.querySelectorAll('[id$="-section"]').forEach(el => {
                el.classList.add('hidden');
            });
            
            // Remove active from all nav buttons
            document.querySelectorAll('.sidebar-nav button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected section
            const targetSection = document.getElementById(section + '-section');
            targetSection.classList.remove('hidden');
            document.getElementById('nav-' + section).classList.add('active');
            
            // Add entrance animation
            targetSection.style.animation = 'fadeIn 0.5s ease-out';
            
            // Close sidebar on mobile after selection
            if (window.innerWidth <= 768) {
                document.getElementById('sidebar').classList.remove('open');
            }
            
            // Update page title
            document.title = `CCD 2.0 - ${section.charAt(0).toUpperCase() + section.slice(1)}`;
            
            // Show realistic loading for certain sections
            if (section === 'menu' || section === 'cafes' || section === 'events') {
                showToast(`Loading ${section}...`);
            }
        }

        // Carousel functions
        function initializeCarousel() {
            carouselInterval = setInterval(nextSlide, 5000); // Auto-advance every 5 seconds
        }

        function nextSlide() {
            const container = document.getElementById('carousel-container');
            const slides = container.children.length;
            currentSlide = (currentSlide + 1) % slides;
            updateCarousel();
        }

        function prevSlide() {
            const container = document.getElementById('carousel-container');
            const slides = container.children.length;
            currentSlide = (currentSlide - 1 + slides) % slides;
            updateCarousel();
        }

        function goToSlide(index) {
            currentSlide = index;
            updateCarousel();
        }

        function updateCarousel() {
            const container = document.getElementById('carousel-container');
            const dots = document.querySelectorAll('.carousel-dot');
            
            container.style.transform = `translateX(-${currentSlide * 100}%)`;
            
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentSlide);
            });
        }

        // Enhanced render functions
        function renderMenu() {
            const container = document.getElementById('menu-grid');
            const gradients = [
                'linear-gradient(135deg, #8B4513, #D2691E)',
                'linear-gradient(135deg, #2c3e50, #34495e)',
                'linear-gradient(135deg, #28a745, #20c997)',
                'linear-gradient(135deg, #dc3545, #e74c3c)',
                'linear-gradient(135deg, #6f42c1, #e83e8c)',
                'linear-gradient(135deg, #fd7e14, #ffc107)'
            ];
            
            container.innerHTML = menu.map((item, index) => `
                <div class="card">
                    <div class="menu-item-image" style="background: ${gradients[index % gradients.length]};">
                        <span><i class="fas fa-coffee"></i> ${item.name}</span>
                    </div>
                    <h3><i class="fas fa-coffee"></i> ${item.name}</h3>
                    <p>${item.description}</p>
                    <div>
                        ${item.fair_trade ? '<span class="badge fair-trade"><i class="fas fa-handshake"></i> Fair Trade</span>' : ''}
                        ${item.organic ? '<span class="badge organic"><i class="fas fa-leaf"></i> Organic</span>' : ''}
                    </div>
                    <p class="price">$${item.price}</p>
                    <p><i class="fas fa-box"></i> Stock: ${item.stock_quantity}</p>
                    <p><i class="fas fa-leaf"></i> Sustainability: ${item.sustainability_rating}/5</p>
                    <button class="add-btn" onclick="addToCart(${item.id})" ${item.stock_quantity === 0 ? 'disabled' : ''}>
                        <i class="fas fa-plus"></i> ${item.stock_quantity > 0 ? 'Add to Cart' : 'Out of Stock'}
                    </button>
                </div>
            `).join('');
        }

        function renderCafes() {
            const container = document.getElementById('cafes-grid');
            container.innerHTML = cafes.map(cafe => `
                <div class="card">
                    <h3><i class="fas fa-store"></i> ${cafe.name}</h3>
                    <p><i class="fas fa-map-marker-alt"></i> ${cafe.address}</p>
                    <p><i class="fas fa-city"></i> ${cafe.city}</p>
                    <p><i class="fas fa-phone"></i> ${cafe.phone}</p>
                    <div>
                        ${cafe.features.map(feature => `<span class="badge"><i class="fas fa-check"></i> ${feature}</span>`).join('')}
                    </div>
                    <p><i class="fas fa-star"></i> Rating: ${cafe.rating}/5</p>
                    <p><i class="fas fa-wifi"></i> ${cafe.wifi_available ? 'WiFi Available' : 'No WiFi'}</p>
                    <p><i class="fas fa-car"></i> ${cafe.parking_available ? 'Parking Available' : 'No Parking'}</p>
                </div>
            `).join('');
        }

        function renderEvents() {
            const container = document.getElementById('events-grid');
            container.innerHTML = events.map(event => `
                <div class="card">
                    <h3><i class="fas fa-calendar-alt"></i> ${event.title}</h3>
                    <p><i class="fas fa-clock"></i> ${event.date} at ${event.time}</p>
                    <p>${event.description}</p>
                    <p class="price">$${event.price}</p>
                    <p><i class="fas fa-users"></i> ${event.current_participants}/${event.max_participants} participants</p>
                    <button class="book-btn" onclick="bookEvent(${event.id})" ${event.current_participants >= event.max_participants ? 'disabled' : ''}>
                        <i class="fas fa-ticket-alt"></i> ${event.current_participants >= event.max_participants ? 'Fully Booked' : 'Book Now'}
                    </button>
                </div>
            `).join('');
        }

        function renderPromotions() {
            const container = document.getElementById('promotions-grid');
            container.innerHTML = promotions.map(promo => `
                <div class="card">
                    <h3><i class="fas fa-gift"></i> ${promo.title}</h3>
                    <p>${promo.description}</p>
                    <p><strong><i class="fas fa-tag"></i> Code: ${promo.code}</strong></p>
                    <button class="apply-btn" onclick="applyPromo('${promo.code}')">
                        <i class="fas fa-check"></i> Apply Code
                    </button>
                </div>
            `).join('');
        }

        function renderCart() {
            const container = document.getElementById('cart-items');
            const totalEl = document.getElementById('cart-total');
            const orderBtn = document.getElementById('place-order');
            
            if (cart.length === 0) {
                container.innerHTML = '<p><i class="fas fa-shopping-cart"></i> Your cart is empty</p>';
                totalEl.classList.add('hidden');
                orderBtn.classList.add('hidden');
            } else {
                container.innerHTML = cart.map(item => `
                    <div class="cart-item">
                        <span><i class="fas fa-coffee"></i> ${item.name} x${item.quantity}</span>
                        <span>$${(item.price * item.quantity).toFixed(2)}</span>
                        <button onclick="removeFromCart(${item.id})" style="background: var(--danger-color); color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `).join('');
                
                const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                totalEl.innerHTML = `<i class="fas fa-calculator"></i> Total: $${total.toFixed(2)}`;
                totalEl.classList.remove('hidden');
                orderBtn.classList.remove('hidden');
            }
        }

        function renderOrders() {
            const container = document.getElementById('orders-list');
            if (orders.length === 0) {
                container.innerHTML = '<p><i class="fas fa-receipt"></i> No orders yet</p>';
            } else {
                container.innerHTML = orders.map(order => `
                    <div class="card">
                        <h3><i class="fas fa-receipt"></i> Order #${order.id}</h3>
                        <p><i class="fas fa-info-circle"></i> Status: ${order.status}</p>
                        <p><i class="fas fa-dollar-sign"></i> Total: $${order.total.toFixed(2)}</p>
                        <p><i class="fas fa-clock"></i> Time: ${order.timestamp}</p>
                        <div>
                            ${order.items.map(item => `<span class="badge"><i class="fas fa-coffee"></i> ${item.name} x${item.quantity}</span>`).join('')}
                        </div>
                    </div>
                `).join('');
            }
        }

        // Enhanced functions
        function addToCart(itemId) {
            const item = menu.find(i => i.id === itemId);
            if (item && item.stock_quantity > 0) {
                const existingItem = cart.find(cartItem => cartItem.id === itemId);
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({ ...item, quantity: 1 });
                }
                updateUI();
                showToast(`‚úÖ Added ${item.name} to cart!`);
            }
        }

        function removeFromCart(itemId) {
            cart = cart.filter(item => item.id !== itemId);
            updateUI();
            showToast('üóëÔ∏è Item removed from cart');
        }

        function bookEvent(eventId) {
            const event = events.find(e => e.id === eventId);
            if (event && event.current_participants < event.max_participants) {
                showToast(`üé´ Booked: ${event.title}`);
                alert(`Booked: ${event.title}\n${event.date} at ${event.time}\n$${event.price}`);
            }
        }

        function applyPromo(code) {
            const promo = promotions.find(p => p.code === code);
            if (promo) {
                showToast(`üéâ Promo applied: ${promo.title}`);
                alert(`Promo applied: ${promo.title}\n${promo.description}`);
            }
        }

        async function placeOrder() {
            if (cart.length === 0) return;

            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const order = {
                id: orders.length + 1,
                items: [...cart],
                total: total,
                status: 'Preparing',
                timestamp: new Date().toLocaleString()
            };

            try {
                if (backendConnected) {
                    const response = await fetch('http://localhost:5000/api/orders', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ items: cart, total: total, order_type: 'pickup' })
                    });
                    
                    if (response.ok) {
                        const result = await response.json();
                        order.id = result.data?.id || order.id;
                        showToast('‚úÖ Order sent to backend!');
                    }
                }
                
                orders.push(order);
                loyaltyPoints += Math.floor(total);
                cart = [];
                updateUI();
                showToast(`üéâ Order placed! Total: $${total.toFixed(2)}`);
            } catch (error) {
                showToast('‚ùå Order failed. Please try again.');
            }
        }

        // Authentication Functions
        function showAuthTab(tab) {
            const loginTab = document.getElementById('login-tab');
            const registerTab = document.getElementById('register-tab');
            const loginForm = document.getElementById('login-form');
            const registerForm = document.getElementById('register-form');
            
            if (tab === 'login') {
                loginTab.classList.add('active');
                registerTab.classList.remove('active');
                loginForm.classList.remove('hidden');
                registerForm.classList.add('hidden');
            } else {
                registerTab.classList.add('active');
                loginTab.classList.remove('active');
                registerForm.classList.remove('hidden');
                loginForm.classList.add('hidden');
            }
        }

        async function handleLogin(event) {
            event.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            try {
                if (backendConnected) {
                    // Try backend login
                    const response = await fetch('http://localhost:5000/api/users/login', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email, password })
                    });
                    
                    if (response.ok) {
                        const result = await response.json();
                        currentUser = result.data;
                        showToast('‚úÖ Login successful!');
                    } else {
                        throw new Error('Login failed');
                    }
                } else {
                    // Mock login
                    currentUser = {
                        id: '1',
                        full_name: 'Coffee Lover',
                        email: email,
                        phone: '+1 (555) 123-4567',
                        created_at: '2024-01-01T00:00:00Z',
                        loyalty_points: loyaltyPoints
                    };
                    showToast('‚úÖ Login successful! (Offline Mode)');
                }
                
                updateUserProfile();
                showUserProfile();
                
            } catch (error) {
                showToast('‚ùå Login failed. Please check your credentials.');
            }
        }

        async function handleRegister(event) {
            event.preventDefault();
            const name = document.getElementById('register-name').value;
            const email = document.getElementById('register-email').value;
            const phone = document.getElementById('register-phone').value;
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm-password').value;
            
            if (password !== confirmPassword) {
                showToast('‚ùå Passwords do not match!');
                return;
            }
            
            try {
                if (backendConnected) {
                    // Try backend registration
                    const response = await fetch('http://localhost:5000/api/users/register', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ 
                            full_name: name, 
                            email: email, 
                            phone: phone,
                            password: password 
                        })
                    });
                    
                    if (response.ok) {
                        const result = await response.json();
                        currentUser = result.data;
                        showToast('‚úÖ Registration successful!');
                    } else {
                        throw new Error('Registration failed');
                    }
                } else {
                    // Mock registration
                    currentUser = {
                        id: Date.now().toString(),
                        full_name: name,
                        email: email,
                        phone: phone,
                        created_at: new Date().toISOString(),
                        loyalty_points: 0
                    };
                    showToast('‚úÖ Registration successful! (Offline Mode)');
                }
                
                updateUserProfile();
                showUserProfile();
                
            } catch (error) {
                showToast('‚ùå Registration failed. Please try again.');
            }
        }

        function updateUserProfile() {
            if (currentUser) {
                document.getElementById('user-name').textContent = currentUser.full_name;
                document.getElementById('user-email').textContent = currentUser.email;
                document.getElementById('user-phone').textContent = currentUser.phone || 'Not provided';
                document.getElementById('user-join-date').textContent = new Date(currentUser.created_at).toLocaleDateString();
                document.getElementById('profile-points').textContent = currentUser.loyalty_points || 0;
                loyaltyPoints = currentUser.loyalty_points || 0;
            }
        }

        function showUserProfile() {
            document.getElementById('login-form').classList.add('hidden');
            document.getElementById('register-form').classList.add('hidden');
            document.getElementById('user-profile').classList.remove('hidden');
        }

        function editProfile() {
            const newName = prompt('Enter new name:', currentUser.full_name);
            const newPhone = prompt('Enter new phone:', currentUser.phone);
            
            if (newName && newName !== currentUser.full_name) {
                currentUser.full_name = newName;
                updateUserProfile();
                showToast('‚úÖ Profile updated!');
            }
            
            if (newPhone && newPhone !== currentUser.phone) {
                currentUser.phone = newPhone;
                updateUserProfile();
                showToast('‚úÖ Phone number updated!');
            }
        }

        function viewLoyaltyHistory() {
            showToast('üìä Loyalty history feature coming soon!');
            alert('Loyalty History:\n\n‚Ä¢ Points earned: ' + loyaltyPoints + '\n‚Ä¢ Current level: Gold Member\n‚Ä¢ Next reward: 100 points away\n\nThis feature will show detailed transaction history.');
        }

        function viewFavorites() {
            showToast('‚ù§Ô∏è Favorites feature coming soon!');
            alert('Favorites:\n\n‚Ä¢ Your favorite coffee items will be saved here\n‚Ä¢ Quick reorder from favorites\n‚Ä¢ Personalized recommendations\n\nThis feature will sync with your order history.');
        }

        // Settings Functions
        function saveNotificationSettings(event) {
            event.preventDefault();
            userSettings.notifications.orders = document.getElementById('notif-orders').checked;
            userSettings.notifications.promotions = document.getElementById('notif-promotions').checked;
            userSettings.notifications.events = document.getElementById('notif-events').checked;
            userSettings.notifications.loyalty = document.getElementById('notif-loyalty').checked;
            userSettings.notifications.newsletter = document.getElementById('notif-newsletter').checked;
            
            localStorage.setItem('userSettings', JSON.stringify(userSettings));
            showToast('‚úÖ Notification settings saved!');
        }

        function saveAppearanceSettings(event) {
            event.preventDefault();
            userSettings.appearance.fontSize = document.getElementById('font-size-select').value;
            
            localStorage.setItem('userSettings', JSON.stringify(userSettings));
            showToast('‚úÖ Appearance settings saved!');
        }

        function saveCoffeePreferences(event) {
            event.preventDefault();
            userSettings.coffee.type = document.getElementById('coffee-type').value;
            userSettings.coffee.milk = document.getElementById('milk-type').value;
            userSettings.coffee.sugar = document.getElementById('sugar-level').value;
            
            localStorage.setItem('userSettings', JSON.stringify(userSettings));
            showToast('‚úÖ Coffee preferences saved!');
        }

        function changePassword() {
            const currentPassword = prompt('Enter current password:');
            const newPassword = prompt('Enter new password:');
            const confirmPassword = prompt('Confirm new password:');
            
            if (newPassword === confirmPassword) {
                showToast('‚úÖ Password changed successfully!');
            } else {
                showToast('‚ùå Passwords do not match!');
            }
        }

        function exportData() {
            const userData = {
                profile: currentUser,
                orders: orders,
                cart: cart,
                settings: userSettings,
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(userData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'ccd-user-data.json';
            link.click();
            URL.revokeObjectURL(url);
            
            showToast('‚úÖ Data exported successfully!');
        }

        function clearCache() {
            localStorage.clear();
            showToast('‚úÖ Cache cleared successfully!');
        }

        function deleteAccount() {
            if (confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
                if (confirm('This will permanently delete all your data. Are you absolutely sure?')) {
                    currentUser = null;
                    cart = [];
                    orders = [];
                    loyaltyPoints = 0;
                    updateUI();
                    showToast('‚úÖ Account deleted successfully!');
                    showAuthTab('login');
                }
            }
        }

        // Load user settings on startup
        function loadUserSettings() {
            const saved = localStorage.getItem('userSettings');
            if (saved) {
                userSettings = JSON.parse(saved);
                
                // Apply saved settings
                if (userSettings.notifications) {
                    document.getElementById('notif-orders').checked = userSettings.notifications.orders;
                    document.getElementById('notif-promotions').checked = userSettings.notifications.promotions;
                    document.getElementById('notif-events').checked = userSettings.notifications.events;
                    document.getElementById('notif-loyalty').checked = userSettings.notifications.loyalty;
                    document.getElementById('notif-newsletter').checked = userSettings.notifications.newsletter;
                }
                
                if (userSettings.appearance) {
                    document.getElementById('font-size-select').value = userSettings.appearance.fontSize;
                }
                
                if (userSettings.coffee) {
                    document.getElementById('coffee-type').value = userSettings.coffee.type;
                    document.getElementById('milk-type').value = userSettings.coffee.milk;
                    document.getElementById('sugar-level').value = userSettings.coffee.sugar;
                }
            }
        }
    </script>
</body>
</html>






